- [什么是事件？](#什么是事件)
- [如何阻止事件冒泡](#如何阻止事件冒泡)
- [对事件委托(代理)的理解](#对事件委托代理的理解)
  - [手写一个事件代理函数](#手写一个事件代理函数)
- [事件触发的过程是怎样的](#事件触发的过程是怎样的)
- [js如何给元素添加点击事件](#js如何给元素添加点击事件)
- [如何监听和卸载监听事件？](#如何监听和卸载监听事件)
- [e.target和e.currentTarget的区别](#etarget和ecurrenttarget的区别)

### 什么是事件？
事件是用户操作网页时发生的交互动作，比如 click/move， 事件除了用户触发的动作外，还可以是文档加载，窗口滚动和大小调整。事件被封装成一个 event 对象，包含了该事件发生时的所有相关信息（ event 的属性）以及可以对事件进行的操作（ event 的方法）。

### 如何阻止事件冒泡
**冒泡**指的是事件从目标元素冒泡到 document，依次检查经过的节点是否绑定了事件监听函数，如果有则执行。

普通浏览器使用：`event.stopPropagation()`
IE浏览器使用：`event.cancelBubble = true;`

### 对事件委托(代理)的理解
**事件委托本质上是利用了浏览器事件冒泡的机制**。因为事件在冒泡过程中会上传到父节点，父节点可以通过事件对象获取到目标节点，因此可以把**子节点的监听函数定义在父节点上，由父节点的监听函数统一处理多个子元素的事件**，这种方式称为事件委托（事件代理）。

#### 手写一个事件代理函数
```js
function proxy(event, cb, parent, child) {
  parent.addEventListener(event, function (e) {
    if (e.target.matches(child)) {
      cb(e);
    }
  });
}

// 使用示例
proxy('click', function(e) {
  console.log('Child element clicked!', e.target);
}, parentElement, childElement);
```


### 事件触发的过程是怎样的

当用户在浏览器中进行操作时，例如点击一个按钮或滚动页面等，浏览器会接收到事件并按照以下步骤进行处理：

1. 事件捕获：事件从 window 对象传播到最底层的目标元素，这个过程称为事件捕获。
2. 目标阶段：事件到达目标元素。
3. 事件冒泡：事件从目标元素开始向父元素传播，直到传播到顶级 window 对象。

在这三个阶段中，每个元素都有机会处理事件。处理事件的方式是通过监听事件，当事件发生时，执行预定义的函数。

通常情况下，使用` addEventListener()` 方法来在**元素**上注册事件处理程序，该方法的第一个参数是**事件名称**，第二个参数是`函数名称`，第三个参数`useCapture`，表示事件是否在捕获阶段处理，默认为 false，即在冒泡阶段处理

例如，以下代码将向按钮元素注册点击事件处理程序：

```js
const button = document.querySelector('button');
button.addEventListener('click', function() {
  console.log('冒泡');
}, false);

button.addEventListener('click', function() {
  console.log('捕获');
}, true);
```

### js如何给元素添加点击事件
```js
var btn = document.getElementById("myBtn");
btn.addEventListener("click", function(){
  alert("Button was clicked");
});
```

### 如何监听和卸载监听事件？
```js
function handleEvent(event) {
  console.log(event)
}
// 添加事件监听
function addClickEventListener() {
  document.addEventListener('click',handleEvent)
}
// 移除事件监听
function removeClickEventListener() {
  document.removeEventListener('click',handleEvent)
}
```
### e.target和e.currentTarget的区别
在事件处理程序中，e.target 和 e.currentTarget 是两个常用的属性，用于获得当前触发事件的目标元素和当前处理事件的元素。

1. `e.target`：表示事件发生时鼠标点击的最内层的元素。如果事件发生在子元素上，那么 e.target 就是子元素；如果事件发生在父元素上，那么 e.target 就是父元素。

2. `e.currentTarget`：表示当前事件处理程序绑定的元素。无论事件发生在哪个元素上，e.currentTarget 始终指向绑定事件的元素。

总结起来：

- e.target：指的是**触发事件的具体元素**，无论该元素是否是事件绑定元素的子元素。
- e.currentTarget：指的是**事件绑定的元素**，即事件的处理程序所在的元素。

举个例子来说明：

```html
<div id="parent">
  <div id="child"></div>
</div>

<script>
  const parentElement = document.getElementById('parent');
  const childElement = document.getElementById('child');

  parentElement.addEventListener('click', function(e) {
    console.log(e.target);       // 点击子元素输出: <div id="child"></div>
    console.log(e.currentTarget);  // 输出: <div id="parent"></div>
  });
</script>
```